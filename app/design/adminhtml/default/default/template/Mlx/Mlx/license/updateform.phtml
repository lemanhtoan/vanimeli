<?php

?>
<table width="300">
	<tr>
		<td colspan="2">
			<?php echo $this->__('Upgrade License to')?><br/>
			<select style="margin:5px 0 5px 0;"class="input-text" name="<?php echo $this->getExtensionName() ?>_licensetype" id="<?php echo $this->getExtensionName() ?>_licensetype">
				<?php foreach($this->getLicenseTypeOption() as $key=>$label): ?>
					<option value="<?php echo $key?>"><?php echo $label?></option>
				<?php endforeach; ?>
			</select>
		</td>
	</tr>
	<tr>
		<td>
			<button style="" onclick="updateLicenseViewPrice('<?php echo $this->getLicenseKey() ?>')" class="scalable" type="button" >
				<span><?php echo $this->__('View Price')?></span>
			</button>			
		</td>
		<td>
			<button style="" onclick="updateLicensePurchase('<?php echo $this->getLicenseKey() ?>')" class="scalable add" type="button" >
				<span><?php echo $this->__('Upgrade Now')?></span>
			</button>				
		</td>
	</tr>
</table><br/>

<script type="text/javascript">
	function updateLicenseViewPrice(licensekey){
		var licensetype = $('<?php echo $this->getExtensionName() ?>_licensetype').value;
		var licensekey = $('mlx_license_key_Mlx_<?php echo $this->getExtensionName() ?>').value;
		var url = '<?php echo $this->getViewPriceUrl()?>'+'licensetype/'+licensetype+"/licensekey/"+licensekey;		
		TINY.box.show(url, 1, 300, 100, 1);
	}
	
	function updateLicensePurchase(licensekey){
		var licensetype = $('<?php echo $this->getExtensionName() ?>_licensetype').value;
		var licensekey = $('mlx_license_key_Mlx_<?php echo $this->getExtensionName() ?>').value;
		var url = '<?php echo $this->getUpdateUrl()?>'+'licensetype/'+licensetype+"/licensekey/"+licensekey;	
		location.href=url;
	}	
</script>